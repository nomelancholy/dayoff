# Project Context
- **Framework**: React (Vite), TypeScript
- **Styling**: Tailwind CSS, Shadcn UI, Magic UI
- **State Management**: Zustand (Client Global State), Tanstack Query (Server State)
- **Database & Auth**: Supabase, Drizzle ORM
- **Routing**: React-Router
- **Package Manager**: npm

# Coding Standards
- **Component**: 
  - 함수형 컴포넌트 사용. `const`로 정의하고 Named Export 사용 (`export const ComponentName = ...`).
  - 컴포넌트는 `props` 타입을 명시적으로 정의 (Interface 사용 권장).
- **Styling**: 
  - Tailwind CSS 유틸리티 클래스 우선 사용.
  - 조건부 스타일링은 `clsx`와 `tailwind-merge`를 조합한 `cn()` 유틸리티 함수 사용.
- **Database (Supabase & Drizzle)**: 
  - **모든 DB 쿼리는 Drizzle ORM을 사용한다.** (Supabase Client 직접 호출 지양)
  - 데이터 페칭 로직은 Tanstack Query의 `useQuery`, `useMutation` 내에서 실행한다.
  - 항상 Drizzle 을 활용해 RLS 적용을 권장한다.
  - RLS(Row Level Security)가 적용된 테이블을 다룰 때는 Auth Context가 올바르게 전달되는지 확인한다.
  - Supabase 에서 적용해야 하는 View나 function도 Drizzle로 정의하여 프로젝트 폴더 안에 저장한다
- **Type Safety**: 
  - `any` 사용 금지. 
  - Supabase Generated Types 또는 Drizzle Schema에서 추론된 타입을 사용한다.
- **Import Paths**: 
  - 상대 경로(`../../`) 대신 Path Alias(`@/common`, `@/features`)를 적극 사용한다.

# Behavior Rules
- 코드를 수정할 때는 전체 파일을 다시 쓰지 말고, 변경된 부분만 명확히 제시할 것.
- 새로운 라이브러리 추가 전에는 반드시 이유와 함께 허락을 구할 것.
- 주석은 복잡한 비즈니스 로직에만 한글로 작성.
- Shadcn UI 컴포넌트 추가 시 `npx shadcn@latest add [component]` 명령어를 제안할 것.

# UI Implementation Rules
- **Reference Source**: `/_reference_ui` 폴더 내의 HTML 파일들을 디자인 원본으로 삼는다.
- **Layout**: 
  - Header와 Footer는 `Layout` 컴포넌트로 분리하여 `Outlet`을 감싸는 형태로 구현한다.
- **Responsiveness**: 모바일 퍼스트(Mobile-first)가 아닌, 데스크탑 기준에서 모바일로 줄여가는 방식 혹은 그 반대인지 명확히 하되, Tailwind의 `md:`, `lg:` prefix를 활용해 전 구간 반응형을 지원한다.

# Project Structure (Vite Standard)
*모든 소스 코드는 `app` 폴더 내에 위치한다.*

- **app/common**: 전역에서 공통으로 사용되는 요소
  - `components/ui`: Shadcn UI 컴포넌트 저장소
  - `components`: 그 외 공통 컴포넌트 (Header, Footer 등)
  - `hooks`: 전역 커스텀 훅
  - `lib`: `utils.ts` (cn 함수 포함), Supabase Client 설정
  - `store`: Zustand 전역 스토어

- **app/features**: 도메인/기능 단위 격리 (Feature-Sliced Design)
  - 구조: `app/features/[feature-name]/`
    - `components/`: 해당 기능 전용 컴포넌트
    - `schema/`: 해당 기능의 Drizzle 스키마 (테이블 정의). 마이그레이션 시 `app/db/schema/index.ts`에서 re-export하여 사용
    - `api/`: 해당 기능의 Drizzle 쿼리 및 Mutation 함수 (React Query에서 호출)
    - `types/`: 해당 기능 전용 타입 정의
    - `page/`: 해당 기능의 페이지 컴포넌트 (예: `page/Page.tsx`)
    - `routes.tsx`: 해당 기능의 라우트 정의 (선택 사항)

- **app/db**: 마이그레이션 전용
  - `schema/index.ts`: 각 feature의 `schema/`를 re-export (Drizzle Kit이 참조)
  - `migrations/`: Drizzle Kit으로 생성된 마이그레이션 파일

- **public**: 정적 애셋 (이미지, 폰트 등)